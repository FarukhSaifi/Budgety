import{c as u,j as e,u as R,r as Y,U as i,F as f,G as h,V as c,H as I,M as H,A as n}from"./index-8lZlQ1VF.js";import{B as N}from"./Button-BDqJC-5O.js";import{a as x,F as V}from"./FormField-Bft-gaAM.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./MenuItem-BWUw3nDk.js";const M=u(e.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"})),z=u(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),O=u(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"})),P=u(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),k=({children:s,title:d,subtitle:o,gradient:l,className:p="",actions:m})=>{const g=l?{background:`linear-gradient(135deg, ${l.start} 0%, ${l.end} 100%)`}:{};return e.jsxs("div",{className:`rounded-card border border-gray-100 bg-white shadow-card ${p}`,style:g,children:[d&&e.jsxs("div",{className:`px-6 py-3 ${l?"text-white":"border-b border-gray-200"}`,children:[e.jsx("h6",{className:"text-base font-semibold",children:d}),o&&e.jsx("p",{className:`mt-1 text-sm ${l?"opacity-90":"text-gray-600"}`,children:o})]}),e.jsx("div",{className:"p-2 sm:p-3",children:s}),m&&e.jsx("div",{className:"px-6 pb-3",children:m})]})},G=()=>{const{viewPeriod:s,selectedMonth:d,selectedYear:o,viewType:l,selectedCategory:p,searchQuery:m,transactions:g,dispatch:r}=R(),y=Y.useMemo(()=>{const a=new Set;return g.forEach(t=>{t.category&&a.add(t.category)}),Array.from(a).sort()},[g]),S=a=>{const t=a.target.value;r({type:n.SET_VIEW_PERIOD,payload:{viewPeriod:t,selectedMonth:t===c.MONTHLY?d:void 0,selectedYear:t===c.YEARLY||t===c.MONTHLY?o:void 0}})},T=a=>{r({type:n.SET_VIEW_PERIOD,payload:{viewPeriod:s,selectedMonth:parseInt(a.target.value),selectedYear:o}})},v=a=>{r({type:n.SET_VIEW_PERIOD,payload:{viewPeriod:s,selectedMonth:d,selectedYear:parseInt(a.target.value)}})},E=a=>{r({type:n.SET_VIEW_TYPE,payload:a})},w=a=>{r({type:n.SET_SELECTED_CATEGORY,payload:a.target.value})},L=()=>{r({type:n.SET_SELECTED_CATEGORY,payload:""})},_=a=>{r({type:n.SET_SEARCH_QUERY,payload:a.target.value})},C=()=>{r({type:n.SET_SEARCH_QUERY,payload:""})},A=()=>new Date().getFullYear(),j=()=>{const a=[],t=A();for(let b=t-5;b<=t+1;b++)a.push(b);return a};return e.jsx("div",{className:"mb-2 md:mb-4",children:e.jsxs(k,{title:"View Controls",subtitle:"Filter transactions by period",children:[e.jsxs("div",{className:"mb-2 md:mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i.SEARCH_LABEL}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(P,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:m,onChange:_,placeholder:i.SEARCH_PLACEHOLDER,className:"block w-full pl-10 pr-10 py-2.5 sm:py-2 border border-gray-300 rounded-lg text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),m&&e.jsx("button",{type:"button",onClick:C,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",title:i.CLEAR_SEARCH,children:e.jsx(z,{className:"h-5 w-5"})})]}),m&&e.jsx(N,{variant:"outline",size:"sm",onClick:C,className:"flex-shrink-0 touch-manipulation whitespace-nowrap",children:i.CLEAR_SEARCH})]})]}),e.jsx("div",{className:"mb-2 md:mb-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 md:gap-4 lg:items-start",children:[e.jsxs("div",{className:"flex-1 lg:flex-initial",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"View Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>E(h.LIST),className:`flex-1 sm:flex-initial flex justify-center items-center gap-2 py-2.5 sm:py-2 px-4 rounded-lg font-medium text-sm sm:text-base transition-all duration-200 touch-manipulation ${l===h.LIST?"bg-blue-600 text-white border-2 border-blue-600 shadow-sm":"bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 active:bg-gray-100"}`,children:[e.jsx(O,{className:"text-base sm:text-lg"}),e.jsx("span",{children:f[h.LIST]})]}),e.jsxs("button",{type:"button",onClick:()=>E(h.CALENDAR),className:`flex-1 sm:flex-initial flex justify-center items-center gap-2 py-2.5 sm:py-2 px-4 rounded-lg font-medium text-sm sm:text-base transition-all duration-200 touch-manipulation ${l===h.CALENDAR?"bg-blue-600 text-white border-2 border-blue-600 shadow-sm":"bg-white text-gray-700 border-2 border-gray-300 hover:bg-gray-50 hover:border-gray-400 active:bg-gray-100"}`,children:[e.jsx(M,{className:"text-base sm:text-lg"}),e.jsx("span",{children:f[h.CALENDAR]})]})]})]}),y.length>0&&e.jsxs("div",{className:"flex-1 lg:flex-initial lg:min-w-[280px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i.FILTER_BY_CATEGORY}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(x,{label:"",name:"category",value:p,onChange:w,type:"select",options:[{value:"",label:i.ALL_CATEGORIES},...y.map(a=>({value:a,label:a}))],fullWidth:!0})}),p&&e.jsx(N,{variant:"outline",size:"sm",onClick:L,className:"flex-shrink-0 touch-manipulation whitespace-nowrap",children:i.CLEAR_FILTER})]})]})]})}),e.jsxs(V,{columns:s===c.MONTHLY?3:2,spacing:3,children:[e.jsx(x,{label:"View Period",value:s,onChange:S,type:"select",options:Object.values(c).map(a=>({value:a,label:I[a]}))}),s===c.MONTHLY&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Month",value:d,onChange:T,type:"select",options:H.map((a,t)=>({value:t+1,label:a}))}),e.jsx(x,{label:"Year",value:o,onChange:v,type:"select",options:j().map(a=>({value:a,label:a.toString()}))})]}),s===c.YEARLY&&e.jsx(x,{label:"Year",value:o,onChange:v,type:"select",options:j().map(a=>({value:a,label:a.toString()}))})]})]})})};export{G as default};
