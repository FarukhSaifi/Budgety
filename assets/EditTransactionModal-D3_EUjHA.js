import{u as j,r as T,d as m,R as v,j as e,U as l,h as x,T as o,N,A as D,I,E as P}from"./index-8lZlQ1VF.js";import{B as O}from"./Button-BDqJC-5O.js";import{F as R,a as i}from"./FormField-Bft-gaAM.js";import{s as _}from"./toast-CFIaTDC2.js";import{D as L,a as M,b as F,c as H}from"./DialogTitle-C94iNYoi.js";const Y=({open:b,onClose:p,transaction:a})=>{const{dispatch:S}=j(),d=T.useMemo(()=>a?{type:a.type||"",date:a.date||"",mode:a.mode||m.CASH,description:a.description||"",category:a.category||"",amount:a.amount||""}:{type:"",date:"",mode:m.CASH,description:"",category:"",amount:""},[a]),[t,c]=T.useState(d);v.useEffect(()=>{c(d)},[d]);const r=s=>{const{name:n,value:u}=s.target;c(E=>({...E,[n]:u,...n==="type"&&{category:""}}))},h=s=>{s.preventDefault();const{type:n,date:u,mode:E,description:C,category:y,amount:A}=t;if(!n||!u||!C||!y||!A)return;const f={...a,type:n,date:u,mode:E||m.CASH,description:C.trim(),category:y,amount:Number(parseFloat(A).toFixed(N.DECIMAL_PLACES))};S({type:D.UPDATE_TRANSACTION,payload:f}),_("Transaction updated successfully!"),p()},g=()=>t.type===o.INCOME?Object.values(I):t.type===o.EXPENSE?Object.values(P):[];return a?e.jsxs(L,{open:b,onClose:p,maxWidth:"md",fullWidth:!0,PaperProps:{className:"m-2 sm:m-4"},children:[e.jsx(M,{className:"text-lg sm:text-xl font-semibold pb-3",children:l.EDIT_TRANSACTION||"Edit Transaction"}),e.jsxs("form",{onSubmit:h,children:[e.jsx(F,{className:"px-4 sm:px-6",children:e.jsxs(R,{columns:2,spacing:3,className:"mb-4",children:[e.jsx(i,{label:"Type",name:"type",value:t.type,onChange:r,type:"select",required:!0,options:[{value:"",label:l.CHOOSE},{value:o.INCOME,label:x[o.INCOME]},{value:o.EXPENSE,label:x[o.EXPENSE]}]}),e.jsx(i,{label:l.DATE_PLACEHOLDER,name:"date",value:t.date,onChange:r,type:"date",required:!0,InputLabelProps:{shrink:!0}}),e.jsx(i,{label:"Mode",name:"mode",value:t.mode,onChange:r,type:"select",required:!0,options:Object.values(m).map(s=>({value:s,label:s}))}),e.jsx(i,{label:l.CATEGORY_PLACEHOLDER,name:"category",value:t.category,onChange:r,type:"select",required:!0,disabled:!t.type,options:[{value:"",label:l.CHOOSE},...g().map(s=>({value:s,label:s}))]}),e.jsx(i,{label:l.DESCRIPTION_PLACEHOLDER,name:"description",value:t.description,onChange:r,type:"text",required:!0,fullWidth:!0}),e.jsx(i,{label:l.AMOUNT_PLACEHOLDER,name:"amount",value:t.amount,onChange:r,type:"number",required:!0,inputProps:{min:"0",step:N.STEP_VALUE}})]})}),e.jsxs(H,{className:"px-4 sm:px-6 pb-4 sm:pb-6 gap-2 sm:gap-3",children:[e.jsx(O,{variant:"outline",onClick:p,size:"md",className:"flex-1 sm:flex-initial py-2.5 sm:py-2 touch-manipulation",children:l.CANCEL}),e.jsx(O,{type:"submit",variant:"primary",size:"md",className:"flex-1 sm:flex-initial py-2.5 sm:py-2 touch-manipulation",children:l.SAVE})]})]})]}):null};export{Y as E};
