import{j as t,u as R,b as M,r as S,R as D,l as O,D as C,U as y,T as _,C as P,d as n}from"./index-8lZlQ1VF.js";import{u as w}from"./useDateFormatter-CGYOy8qr.js";import{W as j}from"./Widget-B4rx0ltk.js";import{E as $}from"./EditTransactionModal-D3_EUjHA.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./MenuItem-BWUw3nDk.js";import"./Button-BDqJC-5O.js";import"./FormField-Bft-gaAM.js";import"./toast-CFIaTDC2.js";import"./DialogTitle-C94iNYoi.js";const B=({primary:i,secondary:o,tertiary:r,startIcon:u,endIcon:f,chips:x=[],actions:d,onClick:p,className:g=""})=>t.jsxs("div",{onClick:p,className:`
        flex items-start justify-between rounded-lg bg-gray-50 p-2 md:p-4 transition-all duration-200 gap-2 md:gap-4
        ${p?"cursor-pointer hover:bg-gray-100 hover:-translate-y-0.5 hover:shadow-sm":"cursor-default"}
        ${g}
      `,children:[t.jsxs("div",{className:"flex flex-1 items-start gap-2 md:gap-4 min-w-0",children:[u&&t.jsx("div",{className:"flex items-center flex-shrink-0",children:u}),t.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[i&&t.jsx("div",{className:`text-sm font-medium text-gray-900 truncate ${o?"mb-1":""}`,children:i}),o&&t.jsx("div",{className:`text-xs text-gray-600 ${r?"mb-1":""}`,children:o}),r&&t.jsx("div",{className:"text-xs text-gray-600",children:r}),x.length>0&&t.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:x.map((s,b)=>{const h=typeof s=="string"?s:s.label,N=typeof s=="string"?"outlined":s.variant||"outlined",c=typeof s=="string"?"default":s.color||"default",e={outlined:"border border-gray-300 bg-transparent",filled:"bg-gray-200 border-0"},a={default:"text-gray-700 bg-gray-100",primary:"text-blue-700 bg-blue-100 border-blue-300",secondary:"text-gray-700 bg-gray-100"},l="inline-flex h-6 items-center rounded-full px-2.5 text-xs font-medium",m=e[N]||e.outlined,T=a[c]||a.default;return t.jsx("span",{className:`${l} ${m} ${T}`,children:h},b)})})]})]}),(f||d)&&t.jsxs("div",{className:"ml-2 md:ml-4 flex items-center gap-2 flex-shrink-0",children:[f,d]})]}),L=({children:i,spacing:o="gap-2 md:gap-4",className:r=""})=>t.jsx("div",{className:`flex flex-col ${o} ${r}`,children:i}),X=({transactions:i,limit:o=C.PREVIEW_ITEMS})=>{const{searchQuery:r}=R(),{formatCurrency:u}=M(),{formatDate:f}=w(),[x,d]=S.useState(null),[p,g]=S.useState(!1),s=e=>{d(e),g(!0)},b=()=>{g(!1),d(null)},h=(e,a=C.DESCRIPTION_LENGTH)=>e?e.length<=a?e:e.substring(0,a)+"...":"No description",N=e=>{if(!e)return null;const l={[n.UPI]:{label:"UPI",color:"primary",variant:"filled"},[n.CARD]:{label:"Card",color:"primary",variant:"filled"},[n.CASH]:{label:"Cash",color:"default",variant:"filled"},[n.NET_BANKING]:{label:"Net Banking",color:"primary",variant:"filled"},[n.WALLET]:{label:"Wallet",color:"primary",variant:"filled"},[n.NEFT]:{label:"NEFT",color:"default",variant:"filled"},[n.IMPS]:{label:"IMPS",color:"default",variant:"filled"},[n.RTGS]:{label:"RTGS",color:"default",variant:"filled"},[n.BANK_TRANSFER]:{label:"Bank Transfer",color:"default",variant:"filled"}}[e]||{label:e,color:"default",variant:"filled"};return{label:l.label,variant:l.variant,color:l.color}},c=D.useMemo(()=>{let e=i;return r&&r.trim()!==""&&(e=O(e,r)),[...e].sort((a,l)=>{const m=new Date(a.date||a.createdAt);return new Date(l.date||l.createdAt)-m}).slice(0,o)},[i,o,r]);return c.length===0?t.jsx(j,{title:y.RECENT_TRANSACTIONS,children:t.jsx("div",{className:"py-8 text-center",children:t.jsx("p",{className:"text-sm text-gray-600",children:y.NO_TRANSACTIONS})})}):t.jsxs(j,{title:y.RECENT_TRANSACTIONS,children:[t.jsx(L,{spacing:"gap-2 md:gap-4",children:c.map(e=>{const a=e.type===_.INCOME,l=a?"text-green-600":"text-red-600",m=a?"+":"-",T=h(e.description,C.DESCRIPTION_LENGTH),E=N(e.mode),v=[];E&&v.push(E),e.category&&v.push({label:e.category,variant:"outlined",color:"default"});const I=Number(e.amount)||0,A=u(Math.abs(I),{minimumFractionDigits:0,maximumFractionDigits:0});return t.jsx(B,{primary:t.jsx("span",{className:"block truncate",title:e.description||"No description",children:T}),secondary:f(e.date,"short"),chips:v,endIcon:t.jsx("div",{className:"flex flex-col items-end gap-1 flex-shrink-0 ml-2",children:t.jsxs("span",{className:`font-semibold text-sm whitespace-nowrap ${l}`,children:[m,P,A]})}),onClick:()=>s(e),className:"touch-manipulation"},e.id)})}),t.jsx($,{open:p,onClose:b,transaction:x})]})};export{X as default};
