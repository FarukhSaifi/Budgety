import{j as e,U as r,u as S,b as _,r as E,N as s,C as x,P as A,A as f}from"./index-8lZlQ1VF.js";import{C as v}from"./ConfirmDialog-BN14OwTu.js";import{E as T}from"./EmptyState-C1ZadX25.js";import{P as I,S as M}from"./SectionCard-C45VGQ9e.js";import{s as O}from"./toast-CFIaTDC2.js";import{v as F}from"./v4-CcQs6ztn.js";import"./Button-BDqJC-5O.js";import"./DialogTitle-C94iNYoi.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";const G=({onSave:o,onCancel:m,saveText:a=r.SAVE,cancelText:d=r.CANCEL,saveColor:g="blue",className:c=""})=>{const u={blue:"bg-blue-600 hover:bg-blue-700",green:"bg-green-600 hover:bg-green-700",orange:"bg-orange-600 hover:bg-orange-700",purple:"bg-purple-600 hover:bg-purple-700",indigo:"bg-indigo-600 hover:bg-indigo-700"};return e.jsxs("div",{className:`flex flex-col sm:flex-row gap-2 ${c}`,children:[e.jsx("button",{type:"submit",className:`${u[g]||u.blue} text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 text-sm md:text-base`,onClick:o,children:a}),m&&e.jsx("button",{type:"button",className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 text-sm md:text-base",onClick:m,children:d})]})},P=({title:o,children:m,onSubmit:a,className:d=""})=>e.jsxs("div",{className:`mb-2 md:mb-4 p-2 md:p-4 bg-gray-50 rounded-lg ${d}`,children:[o&&e.jsx("h6",{className:"text-base md:text-lg font-semibold mb-2",children:o}),a?e.jsx("form",{onSubmit:a,children:m}):e.jsx("div",{children:m})]}),Y=()=>{const{savingsGoals:o,dispatch:m}=S(),{formatCurrency:a}=_(),[d,g]=E.useState(!1),[c,u]=E.useState({name:"",targetAmount:"",currentAmount:""}),[p,h]=E.useState({open:!1,goalId:null}),b=t=>{const{name:n,value:l}=t.target;u(i=>({...i,[n]:l}))},C=t=>{t.preventDefault();const{name:n,targetAmount:l,currentAmount:i}=c;if(!n||!l)return;const D={id:F(),name:n,targetAmount:Number(parseFloat(l).toFixed(s.DECIMAL_PLACES)),currentAmount:Number(parseFloat(i||0).toFixed(s.DECIMAL_PLACES)),createdAt:new Date().toISOString()};m({type:f.ADD_SAVINGS_GOAL,payload:D}),u({name:"",targetAmount:"",currentAmount:""}),g(!1)},N=t=>{h({open:!0,goalId:t})},L=()=>{p.goalId&&(m({type:f.DELETE_SAVINGS_GOAL,payload:p.goalId}),O("Savings goal deleted successfully"),h({open:!1,goalId:null}))},j=(t,n)=>{m({type:f.UPDATE_SAVINGS_GOAL,payload:{id:t,currentAmount:Number(parseFloat(n).toFixed(s.DECIMAL_PLACES))}})},y=(t,n)=>n===0?A.MIN:Math.min(t/n*A.MAX,A.MAX);return e.jsxs(I,{children:[e.jsxs(M,{title:r.SAVINGS_GOALS,buttonText:r.ADD_GOAL,onButtonClick:()=>g(!d),buttonIcon:e.jsx("i",{className:"ion-plus-round"}),bgColor:"bg-green-500",buttonColor:"green",children:[d&&e.jsx(P,{title:r.ADD_NEW_SAVINGS_GOAL_TITLE,children:e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 md:gap-4 mb-2 md:mb-4",children:[e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",name:"name",placeholder:r.GOAL_NAME,value:c.name,onChange:b,required:!0}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",name:"targetAmount",placeholder:r.TARGET_AMOUNT,value:c.targetAmount,onChange:b,required:!0,min:"0",step:s.STEP_VALUE}),e.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",name:"currentAmount",placeholder:r.CURRENT_AMOUNT,value:c.currentAmount,onChange:b,min:"0",step:s.STEP_VALUE})]}),e.jsx(G,{onSave:C,onCancel:()=>{g(!1),u({name:"",targetAmount:"",currentAmount:""})},saveColor:"green"})]})}),o.length===0?e.jsx(T,{message:r.NO_GOALS,icon:e.jsx("i",{className:"ion-information-circled"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4",children:o.map(t=>{const n=y(t.currentAmount,t.targetAmount),l=t.targetAmount-t.currentAmount;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-2 md:p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:t.name}),e.jsx("button",{className:"text-red-500 hover:text-red-700 p-1 transition-colors",onClick:()=>N(t.id),title:r.DELETE,children:e.jsx("i",{className:"ion-close-round text-xl"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between mb-2 text-sm text-gray-600",children:[e.jsxs("span",{children:[r.CURRENT_AMOUNT,": ",x,a(t.currentAmount,{minimumFractionDigits:s.DECIMAL_PLACES,maximumFractionDigits:s.DECIMAL_PLACES})]}),e.jsxs("span",{children:[r.TARGET_AMOUNT,": ",x,a(t.targetAmount,{minimumFractionDigits:s.DECIMAL_PLACES,maximumFractionDigits:s.DECIMAL_PLACES})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-5 overflow-hidden",children:e.jsxs("div",{className:`h-full flex items-center justify-center text-xs font-semibold text-white transition-all duration-300 ${n>=A.MAX?"bg-green-500":"bg-cyan-500"}`,style:{width:`${n}%`},children:[n.toFixed(1),"%"]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("small",{className:"text-gray-600",children:l>0?`${r.REMAINING}: ${x}${a(l,{minimumFractionDigits:s.DECIMAL_PLACES,maximumFractionDigits:s.DECIMAL_PLACES})}`:r.GOAL_ACHIEVED}),e.jsx("input",{type:"number",className:"w-28 px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:r.UPDATE_AMOUNT,min:"0",step:s.STEP_VALUE,onBlur:i=>{i.target.value&&(j(t.id,i.target.value),i.target.value="")},onKeyPress:i=>{i.key==="Enter"&&i.target.blur()}})]})]},t.id)})}),o.length>0&&e.jsx("div",{className:"mt-2 md:mt-4 p-2 md:p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 md:gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-gray-600 mb-1 font-medium",children:r.TOTAL_GOALS}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800",children:o.length})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-gray-600 mb-1 font-medium",children:r.TOTAL_TARGET}),e.jsxs("h4",{className:"text-2xl font-bold text-gray-800",children:[x,a(o.reduce((t,n)=>t+n.targetAmount,0),{minimumFractionDigits:s.DECIMAL_PLACES,maximumFractionDigits:s.DECIMAL_PLACES})]})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"text-gray-600 mb-1 font-medium",children:r.TOTAL_SAVED}),e.jsxs("h4",{className:"text-2xl font-bold text-green-600",children:[x,a(o.reduce((t,n)=>t+n.currentAmount,0),{minimumFractionDigits:s.DECIMAL_PLACES,maximumFractionDigits:s.DECIMAL_PLACES})]})]})]})})]}),e.jsx(v,{open:p.open,onClose:()=>h({open:!1,goalId:null}),onConfirm:L,title:r.DELETE_GOAL_TITLE,message:r.CONFIRM_DELETE_GOAL,type:"warning",variant:"danger",confirmText:r.DELETE})]})};export{Y as default};
